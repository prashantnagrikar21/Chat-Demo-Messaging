<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NA APAC Messaging Chat</title>
</head>

<body>

<h3>Chat Support APAC</h3>

<script type="text/javascript">
    /* ---------------------------
       Hidden Pre-Chat Fields
       ---------------------------- */
    function setHiddenPrechatFields() {
        try {
            embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
                Chat_Source: 'SM',
                Persona: 'Installer',
                Region: 'APAC'
            });
        } catch (e) {
            console.error('Prechat error:', e);
        }
    }

    /* ---------------------------
       Initialize Embedded Messaging
       ---------------------------- */
    function initEmbeddedMessaging() {
        try {
            embeddedservice_bootstrap.settings.language = 'en_US';

            embeddedservice_bootstrap.init(
                '00Dbf000005CU2f', // Org Id
                'NA_APAC_Chat',   // Messaging Deployment Name
                'https://enphase--sbprashant.sandbox.my.site.com/ESWNAAPACChat1768371637392',
                {
                    scrt2URL: 'https://enphase--sbprashant.sandbox.my.salesforce-scrt.com'
                }
            );
        } catch (err) {
            console.error('Error loading Embedded Messaging:', err);
        }
    }

    /* ---------------------------
       Messaging Ready Event
       ---------------------------- */
    window.addEventListener("onEmbeddedMessagingReady", () => {
        console.log('Embedded Messaging Ready');
        setHiddenPrechatFields();
    });
</script>

<script
    type="text/javascript"
    src="https://enphase--sbprashant.sandbox.my.site.com/ESWNAAPACChat1768371637392/assets/js/bootstrap.min.js"
    onload="initEmbeddedMessaging()">
</script>

</body>
</html>
